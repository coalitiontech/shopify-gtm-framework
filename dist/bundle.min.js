function ct_init_gtm_shopify(){let u,a={storefront_token:"",currency:"USD",shop_url:window.location.protocol+"//"+window.location.host,searchPagePath:"/search",template:"",customer:"",collectionTitle:"",productDetails:"",...window.ct_gtm_settings};if(void 0===a.storefront_token||"string"!=typeof a.storefront_token&&""!==a.storefront_token)console.error("You must provide a storefront token");else{window.dataLayer=window.dataLayer||[];let t=["https://cdnjs.cloudflare.com/ajax/libs/xhook/1.4.9/xhook.min.js"];window.jQuery||(t=["https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js","https://cdnjs.cloudflare.com/ajax/libs/xhook/1.4.9/xhook.min.js"]),a.customer&&"object"==typeof a.customer&&gtmEcomm.identifyCustomer(a.customer),new function(t,e){let r=this;r.files=t,r.js=[],r.head=document.getElementsByTagName("head")[0],r.after=function(){if(jQuery.getJSON(a.shop_url+"/cart",function(t){u={products:t.items.map(function(t){return{id:t.id,quantity:t.quantity}})},sessionStorage.getItem("ct-cart-contents")?i(u,JSON.parse(atob(sessionStorage.getItem("ct-cart-contents")))):sessionStorage.setItem("ct-cart-contents",btoa(JSON.stringify(u)))}),document.location.pathname===a.searchPagePath&&dataLayer.push({event:"search",pageType:"Search Results",searchTerm:function(t,e){e=e||window.location.href,t=t.replace(/[\[\]]/g,"\\$&");let r=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),n=r.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("q")}),document.querySelectorAll('a[href*="/products/"]').length){let e=[],r={},t=[];for(var o in[].forEach.call(document.querySelectorAll('a[href*="/products/"]'),function(t){r[t.getAttribute("href")]=t}),r){o=r[o].getAttribute("href").split(/[?#]/)[0].split("/"),o=o[o.length-1],o=$.ajax({url:a.shop_url+`/products/${o}.json`,success:function(t){t=t.product.variants[0].id||t.product.id;e.push(t)}});t.push(o)}let n={};""!==a.collectionTitle&&"string"==typeof a.collectionTitle&&(n={list:a.collectionTitle}),$.when.apply(null,t).done(function(){gtmEcomm.productImpression(e,n)})}function i(n,o=u){if(o.products.length!==n.products.length)if(o.products.length<n.products.length){var e=n.products.reduce((t,e,r)=>(o.products.some(t=>t.id===e.id)||t.push(r),t),[]);for(let t=0;t<e.length;t++)gtmEcomm.addToCart(n.products[e[t]].id,n.products[e[t]].quantity)}else{var r=o.products.reduce((t,e,r)=>(n.products.some(t=>t.id===e.id)||t.push(r),t),[]);for(let t=0;t<r.length;t++)gtmEcomm.removeFromCart(o.products[r[t]].id,o.products[r[t]].quantity)}for(let t=0;t<n.products.length;t++)o.products.length===n.products.length&&n.products[t].quantity!==o.products[t].quantity&&(o.products[t].quantity<n.products[t].quantity?gtmEcomm.addToCart(n.products[t].id,n.products[t].quantity-o.products[t].quantity):o.products[t].quantity>n.products[t].quantity&&gtmEcomm.removeFromCart(n.products[t].id,o.products[t].quantity-n.products[t].quantity));sessionStorage.setItem("ct-cart-contents",btoa(JSON.stringify(n)))}$('a[href*="/products/"]').click(function(){var t=$(this).attr("href").split(/[?#]/)[0].split("/"),t=t[t.length-1];$.ajax({url:a.shop_url+`/products/${t}.json`,success:function(t){gtmEcomm.productClick(t.product.id)}})}),a.template.match(/.*product.*/gi)&&!a.template.match(/.*collection.*/gi)&&"string"==typeof a.productDetails&&""!==a.productDetails&&gtmEcomm.viewProductDetails(a.productDetails),window.Shopify&&window.Shopify.Checkout&&"thank_you"==window.Shopify.Checkout.step&&gtmEcomm.purchase(window.CHECKOUT_FOR_GTM_INSTRUMENTOR),xhook.after(function(t,e){let r=String(e.url),n=String(t.finalUrl),o=String(t.url);(r.includes(window.routes.cart_add_url)||r.includes(window.routes.cart_change_url)||r.includes(window.routes.cart_update_url)||n.includes(window.routes.cart_add_url)||n.includes(window.routes.cart_change_url)||n.includes(window.routes.cart_update_url)||o.includes(window.routes.cart_add_url)||o.includes(window.routes.cart_change_url)||o.includes(window.routes.cart_update_url))&&jQuery.getJSON(a.shop_url+"/cart",function(t){i({products:t.items.map(function(t){return{id:t.id,quantity:t.quantity}})})})})},r.loadStyle=function(t){let e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,r.head.appendChild(e)},r.loadScript=function(t){let e=document.createElement("script");e.type="text/javascript",e.src=r.js[t],e.onload=function(){++t<r.js.length?r.loadScript(t):r.after()},r.head.appendChild(e)};for(let t=0;t<r.files.length;t++)/\.js$|\.js\?/.test(r.files[t])&&r.js.push(r.files[t]),/\.css$|\.css\?/.test(r.files[t])&&r.loadStyle(r.files[t]);0<r.js.length?r.loadScript(0):r.after()}(t)}}!function n(o,i,u){function a(e,t){if(!i[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(c)return c(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=i[e]={exports:{}},o[e][0].call(r.exports,function(t){return a(o[e][1][t]||t)},r,r.exports,n,o,i,u)}return i[e].exports}for(var c="function"==typeof require&&require,t=0;t<u.length;t++)a(u[t]);return a}({1:[function(t,e,r){e.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},{}],2:[function(t,e,r){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports},{}],3:[function(t,e,r){e.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports},{}],4:[function(t,e,r){function c(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}e.exports=function(a){return function(){var t=this,u=arguments;return new Promise(function(e,r){var n=a.apply(t,u);function o(t){c(n,e,r,o,i,"next",t)}function i(t){c(n,e,r,o,i,"throw",t)}o(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},{}],5:[function(t,e,r){e.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},{}],6:[function(t,n,e){var o=t("./setPrototypeOf.js"),i=t("./isNativeReflectConstruct.js");function u(t,e,r){return i()?n.exports=u=Reflect.construct:n.exports=u=function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&o(e,r.prototype),e},n.exports.__esModule=!0,n.exports.default=n.exports,u.apply(null,arguments)}n.exports=u,n.exports.__esModule=!0,n.exports.default=n.exports},{"./isNativeReflectConstruct.js":13,"./setPrototypeOf.js":17}],7:[function(t,e,r){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}e.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},e.exports.__esModule=!0,e.exports.default=e.exports},{}],8:[function(t,e,r){e.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},e.exports.__esModule=!0,e.exports.default=e.exports},{}],9:[function(t,e,r){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},{}],10:[function(t,e,r){var n=t("./setPrototypeOf.js");e.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports},{"./setPrototypeOf.js":17}],11:[function(t,e,r){e.exports=function(t){return t&&t.__esModule?t:{default:t}},e.exports.__esModule=!0,e.exports.default=e.exports},{}],12:[function(t,e,r){e.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},{}],13:[function(t,e,r){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},{}],14:[function(t,e,r){e.exports=function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],u=!0,a=!1;try{for(r=r.call(t);!(u=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},{}],15:[function(t,e,r){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},{}],16:[function(t,e,r){var n=t("./typeof.js").default,o=t("./assertThisInitialized.js");e.exports=function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)},e.exports.__esModule=!0,e.exports.default=e.exports},{"./assertThisInitialized.js":3,"./typeof.js":19}],17:[function(t,r,e){function n(t,e){return r.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r.exports.__esModule=!0,r.exports.default=r.exports,n(t,e)}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports},{}],18:[function(t,e,r){var n=t("./arrayWithHoles.js"),o=t("./iterableToArrayLimit.js"),i=t("./unsupportedIterableToArray.js"),u=t("./nonIterableRest.js");e.exports=function(t,e){return n(t)||o(t,e)||i(t,e)||u()},e.exports.__esModule=!0,e.exports.default=e.exports},{"./arrayWithHoles.js":2,"./iterableToArrayLimit.js":14,"./nonIterableRest.js":15,"./unsupportedIterableToArray.js":20}],19:[function(t,e,r){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},{}],20:[function(t,e,r){var n=t("./arrayLikeToArray.js");e.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},{"./arrayLikeToArray.js":1}],21:[function(t,e,r){var n=t("./getPrototypeOf.js"),o=t("./setPrototypeOf.js"),i=t("./isNativeFunction.js"),u=t("./construct.js");function a(t){var r="function"==typeof Map?new Map:void 0;return e.exports=a=function(t){if(null===t||!i(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return u(t,arguments,n(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports,a(t)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},{"./construct.js":6,"./getPrototypeOf.js":9,"./isNativeFunction.js":12,"./setPrototypeOf.js":17}],22:[function(t,e,r){e=function(u){"use strict";var c,t=Object.prototype,s=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function a(t,e,r,n){var o,i,u,a,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype),n=new O(n||[]);return e._invoke=(o=t,i=r,u=n,a=p,function(t,e){if(a===d)throw new Error("Generator is already running");if(a===h){if("throw"===t)throw e;return C()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r=r&&function t(e,r){var n=e.iterator[r.method];if(n!==c)return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,y):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=c),r.delegate=null,y):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=c,t(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}(r,u)){if(r===y)continue;return r}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(a===p)throw a=h,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);if(a=d,"normal"===(r=l(o,i,u)).type){if(a=u.done?h:f,r.arg!==y)return{value:r.arg,done:u.done}}else"throw"===r.type&&(a=h,u.method="throw",u.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}u.wrap=a;var p="suspendedStart",f="suspendedYield",d="executing",h="completed",y={};function m(){}function b(){}function v(){}i(e={},n,function(){return this});var g=Object.getPrototypeOf,x=((g=g&&g(g(P([]))))&&g!==t&&s.call(g,n)&&(e=g),v.prototype=m.prototype=Object.create(e));function w(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function k(u,a){var e;this._invoke=function(r,n){function t(){return new a(function(t,e){!function e(t,r,n,o){var i;return"throw"!==(t=l(u[t],u,r)).type?(r=(i=t.arg).value)&&"object"==typeof r&&s.call(r,"__await")?a.resolve(r.__await).then(function(t){e("next",t,n,o)},function(t){e("throw",t,n,o)}):a.resolve(r).then(function(t){i.value=t,n(i)},function(t){return e("throw",t,n,o)}):void o(t.arg)}(r,n,t,e)})}return e=e?e.then(t,t):t()}}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function P(e){if(e){var r,t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return r=-1,(t=function t(){for(;++r<e.length;)if(s.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=c,t.done=!0,t}).next=t}return{next:C}}function C(){return{value:c,done:!0}}return i(x,"constructor",b.prototype=v),i(v,"constructor",b),b.displayName=i(v,o,"GeneratorFunction"),u.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(x),t},u.awrap=function(t){return{__await:t}},w(k.prototype),i(k.prototype,r,function(){return this}),u.AsyncIterator=k,u.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new k(a(t,e,r,n),o);return u.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},w(x),i(x,o,"Generator"),i(x,n,function(){return this}),i(x,"toString",function(){return"[object Generator]"}),u.keys=function(r){var t,n=[];for(t in r)n.push(t);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},u.values=P,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,e){return i.type="throw",i.arg=r,n.next=t,e&&(n.method="next",n.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var u=s.call(o,"catchLoc"),a=s.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,j(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=c),y}},u}("object"==typeof e?e.exports:{});try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},{}],23:[function(t,e,r){e.exports=t("regenerator-runtime")},{"regenerator-runtime":22}],24:[function(t,A,e){"use strict";var r=t("@babel/runtime/helpers/interopRequireDefault"),f=(Object.defineProperty(e,"__esModule",{value:!0}),e.productVariantFragment=e.fetchVariantQuery=e.fetchCheckoutQuery=e.fetchCartQuery=e.default=void 0,r(t("@babel/runtime/regenerator"))),u=r(t("@babel/runtime/helpers/inherits")),a=r(t("@babel/runtime/helpers/possibleConstructorReturn")),c=r(t("@babel/runtime/helpers/getPrototypeOf")),n=r(t("@babel/runtime/helpers/wrapNativeSuper")),i=r(t("@babel/runtime/helpers/slicedToArray")),s=r(t("@babel/runtime/helpers/defineProperty")),d=r(t("@babel/runtime/helpers/typeof")),o=r(t("@babel/runtime/helpers/asyncToGenerator")),l=r(t("@babel/runtime/helpers/classCallCheck")),p=r(t("@babel/runtime/helpers/createClass"));function h(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,p.default)(F,[{key:"productImpression",value:(C=(0,o.default)(f.default.mark(function t(e){var r,n,o,i,u,a,c,s,l=this,p=arguments;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(r=1<p.length&&void 0!==p[1]?p[1]:{}).el,o=r.list,i=r.position,u=[],"undefined"==typeof window||null===window)return t.abrupt("return");t.next=4;break;case 4:if("object"!==(0,d.default)(e)||void 0!==e.name){t.next=14;break}a=0;case 6:if(a<e.length)return t.next=9,this.getFlatVariant(e[a]);t.next=14;break;case 9:if(u[u.length]=t.sent){t.next=11;break}return t.abrupt("return");case 11:a++,t.next=6;break;case 14:for(n&&null==i&&(i=q(n)),c=0;c<u.length;c++)u[c]=this.makeUaProductFieldObject(u[c]);if(s=function(){return l.pushEvent("Product Impression",{listName:o,listPosition:i,ecommerce:{impressions:{items:u,list:o,position:i}}})},n)return t.abrupt("return",N(n,s));t.next=21;break;case 21:return t.abrupt("return",s());case 22:case"end":return t.stop()}},t,this)})),function(t){return C.apply(this,arguments)})},{key:"productClick",value:(P=(0,o.default)(f.default.mark(function t(e){var r,n,o,i,u,a,c=arguments;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(i=1<c.length&&void 0!==c[1]?c[1]:{}).el,n=i.list,o=i.position,i=i.clickEvent,"undefined"==typeof window||null===window)return t.abrupt("return");t.next=3;break;case 3:return(u=M(null!=i?i.currentTarget:void 0,function(t){return t.href}))&&null!=i&&i.preventDefault(),t.next=6,this.getFlatVariant(e);case 6:if(a=t.sent){t.next=8;break}return t.abrupt("return");case 8:if(r&&null==o&&(o=q(r)),this.pushEvent("Product Click",y(y({},a),{},{listName:n,listPosition:o,ecommerce:{click:y(y({},n?{actionField:{list:n}}:{}),{},{products:[y(y({},this.makeUaProductFieldObject(a)),{},{position:o})]})}})),u)return t.abrupt("return",window.location=u);t.next=12;break;case 12:case"end":return t.stop()}},t,this)})),function(t){return P.apply(this,arguments)})},{key:"viewProductDetails",value:(O=(0,o.default)(f.default.mark(function t(e){var r;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"==typeof window||null===window)return t.abrupt("return");t.next=2;break;case 2:return t.next=4,this.getFlatVariant(e);case 4:if(r=t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.abrupt("return",this.pushEvent("View Product Details",y(y({},r),{},{ecommerce:{detail:{products:[this.makeUaProductFieldObject(r)]}}})));case 7:case"end":return t.stop()}},t,this)})),function(t){return O.apply(this,arguments)})},{key:"addToCart",value:function(t,e){return this.updateQuantity(t,e,"Add to Cart","add")}},{key:"removeFromCart",value:function(t,e){return this.updateQuantity(t,e,"Remove from Cart","remove")}},{key:"updateQuantity",value:(j=(0,o.default)(f.default.mark(function t(e,r){var n,o,i,u=arguments;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<u.length&&void 0!==u[2]?u[2]:"Update Quantity",o=3<u.length?u[3]:void 0,"undefined"==typeof window||null===window)return t.abrupt("return");t.next=4;break;case 4:return t.next=6,this.getFlatVariant(e);case 6:if(i=t.sent){t.next=8;break}return t.abrupt("return");case 8:return t.abrupt("return",this.pushEvent(n,y(y({},i),{},{quantity:r},o?{ecommerce:(0,s.default)({currencyCode:this.currencyCode},o,{products:[{items:this.makeUaProductFieldObject(i),quantity:r}]})}:{})));case 9:case"end":return t.stop()}},t,this)})),function(t,e){return j.apply(this,arguments)})},{key:"cartUpdated",value:(_=(0,o.default)(f.default.mark(function t(e){var r;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"==typeof window||null===window)return t.abrupt("return");t.next=2;break;case 2:return t.next=4,this.getSimplifiedCheckout(e);case 4:if(r=t.sent)return t.abrupt("return",this.pushEvent("Cart Updated",r));t.next=6;break;case 6:case"end":return t.stop()}},t,this)})),function(t){return _.apply(this,arguments)})},{key:"checkout",value:(k=(0,o.default)(f.default.mark(function t(e,r){var n;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"==typeof window||null===window)return t.abrupt("return");t.next=2;break;case 2:return t.next=4,this.getSimplifiedCheckout(e);case 4:if(n=t.sent)return t.abrupt("return",this.pushEvent("Checkout",y(y({checkoutStep:r},n),this.enableCheckoutEcommerceProperty?{ecommerce:{currencyCode:this.currencyCode,checkout:{actionField:{step:r},products:this.makeUaCheckoutProducts(n)}}}:{})));t.next=6;break;case 6:case"end":return t.stop()}},t,this)})),function(t,e){return k.apply(this,arguments)})},{key:"purchase",value:(w=(0,o.default)(f.default.mark(function t(e){var r;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"==typeof window||null===window)return t.abrupt("return");t.next=2;break;case 2:return t.next=4,this.getSimplifiedCheckout(e);case 4:if(r=t.sent)return t.abrupt("return",this.pushEvent("Purchase",y(y({},r),this.enableCheckoutEcommerceProperty?{ecommerce:{currencyCode:this.currencyCode,purchase:{actionField:{id:"#"+r.orderNumber,revenue:r.totalPrice,tax:r.totalTax,shipping:r.totalShipping,coupon:r.discountCodes.join(",")},products:this.makeUaCheckoutProducts(r)}}}:{})));t.next=6;break;case 6:case"end":return t.stop()}},t,this)})),function(t){return w.apply(this,arguments)})},{key:"identifyCustomer",value:function(t){if("undefined"!=typeof window&&null!==window)return this.pushEvent("Identify Customer",{customerId:t.id,customerZip:t.zip,customerEmail:t.email})}},{key:"getFlatVariant",value:(x=(0,o.default)(f.default.mark(function t(e){var r,n,o,i,u;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("object"!==(0,d.default)(e)&&"array"!=typeof e){t.next=24;break}for(o=0;o<e.length;o++)r.push(e[o]);i=0;case 3:if(!(i<r.length)){t.next=21;break}if(u=r[i],"object"!==(0,d.default)(u)){t.next=9;break}t.t0=u,t.next=12;break;case 9:return t.next=11,this.fetchVariant(u);case 11:t.t0=t.sent;case 12:if(!(n=t.t0)){t.next=17;break}r[i]=this.makeFlatVariant(n),t.next=18;break;case 17:return t.abrupt("return",console.error("Variant not found",u));case 18:i++,t.next=3;break;case 21:return t.abrupt("return",r);case 24:if("object"!==(0,d.default)(e)){t.next=28;break}t.t1=e,t.next=31;break;case 28:return t.next=30,this.fetchVariant(e);case 30:t.t1=t.sent;case 31:if(n=t.t1)return t.abrupt("return",this.makeFlatVariant(n));t.next=36;break;case 36:return t.abrupt("return",console.error("Variant not found",e));case 37:case"end":return t.stop()}},t,this)})),function(t){return x.apply(this,arguments)})},{key:"fetchVariant",value:(g=(0,o.default)(f.default.mark(function t(e){var r;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return e=L(e),t.next=5,this.queryStorefrontApi({variables:{id:btoa("gid://shopify/ProductVariant/"+e)},query:S});case 5:return r=t.sent,t.abrupt("return",r.node);case 7:case"end":return t.stop()}},t,this)})),function(t){return g.apply(this,arguments)})},{key:"makeFlatVariant",value:function(t){var e=t.product,r=void 0!==e.collections&&e.collections.length?e.collections.edges[0].node.title:"";return{productId:L(e.id),productTitle:e.title,productVariantTitle:"".concat(e.title," - ").concat(t.title),productType:e.productType||e.type||r,productVendor:e.vendor,productUrl:r="".concat(this.storeUrl,"/products/").concat(e.handle),sku:t.sku,price:t.price,compareAtPrice:t.compareAtPrice,variantId:e=L(t.id),variantTitle:t.title,variantImage:(null!=t.image?t.image.originalSrc:void 0)||t.image,variantUrl:"".concat(r,"?variant=").concat(e)}}},{key:"makeUaProductFieldObject",value:function(t){return{id:t.sku,name:t.productVariantTitle,brand:t.productVendor,category:t.productType,variant:t.variantTitle,price:t.price}}},{key:"getSimplifiedCheckout",value:(v=(0,o.default)(f.default.mark(function t(e){var r;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("object"!==(0,d.default)(e)){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.fetchCheckout(e);case 6:t.t0=t.sent;case 7:if(r=t.t0){t.next=10;break}return t.abrupt("return",console.error("Checkout or Cart not found",e));case 10:return t.abrupt("return",this.makeSimplifiedCheckout(r));case 11:case"end":return t.stop()}},t,this)})),function(t){return v.apply(this,arguments)})},{key:"fetchCheckout",value:(b=(0,o.default)(f.default.mark(function t(e){var r,n,o;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=atob(e).match(/gid:\/\/shopify\/(\w+)/),(n=(0,i.default)(n,2))[0],r=n[1],t.next=3,this.queryStorefrontApi({query:function(){switch(r){case"Cart":return E;case"Checkout":return T;default:throw"Unknown type: ".concat(r)}}(),variables:{id:e}});case 3:return n=t.sent,(o=n.node).estimatedCost&&(o.subtotalPrice=o.estimatedCost.subtotalAmount.amount,o.totalPrice=o.estimatedCost.totalAmount.amount),t.abrupt("return",o);case 7:case"end":return t.stop()}},t,this)})),function(t){return b.apply(this,arguments)})},{key:"makeSimplifiedCheckout",value:function(t){var e=this;return t.lineItems.edges&&(t.lineItems=t.lineItems.edges.map(function(t){return t.node})),{checkoutId:L(t.id),checkoutUrl:t.webUrl,subtotalPrice:t.subtotalPrice,totalPrice:t.totalPrice,lineItems:t.lineItems.map(function(t){return y({lineItemId:L(t.id),quantity:t.quantity},e.makeFlatVariant(t.variant))}),orderNumber:t.orderNumber,totalTax:t.totalTax,totalShipping:t.totalShipping,discountCodes:t.discountCodes||[]}}},{key:"makeUaCheckoutProducts",value:function(t){var e=this;return t.lineItems.map(function(t){return y({quantity:t.quantity},e.makeUaProductFieldObject(t))})}},{key:"queryStorefrontApi",value:(m=(0,o.default)(f.default.mark(function t(e){var r,n;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.testpayload=e,(r=new Headers).append("Accept","application/json"),r.append("Content-Type","application/json"),r.append("X-Shopify-Storefront-Access-Token",this.storefrontToken),t.next=7,fetch("".concat(this.storeUrl,"/api/2021-10/graphql"),{method:"POST",headers:r,body:JSON.stringify(e),redirect:"follow"}).then(function(t){return t.json()}).then(function(t){return t}).catch(function(t){throw console.log("error",t),new I(n.data.errors,e)});case 7:return n=t.sent,t.abrupt("return",n.data);case 9:case"end":return t.stop()}},t,this)})),function(t){return m.apply(this,arguments)})},{key:"pushEvent",value:function(t,e){return this.debug&&console.debug("'".concat(t,"'"),e),window.dataLayer||(window.dataLayer=[]),this.disableEcommerceProperty&&e.ecommerce?delete(e=y({},e)).ecommerce:window.dataLayer.push({ecommerce:null}),window.dataLayer.push(y({event:t,firstOccurance:this.isFirstOccurance(t)},e))}},{key:"isFirstOccurance",value:function(t){return!Array.from(this.occurances).includes(t)&&(this.occurances.push(t),!0)}}]);var m,b,v,g,x,w,k,_,j,O,P,C,r=F,t=(e.default=r,"fragment variant on ProductVariant {\n\tid\n\tsku\n\ttitle\n\tprice\n\tcompareAtPrice\n\timage { originalSrc }\n\tproduct {\n\t\tid\n\t\ttitle\n\t\thandle\n\t\tproductType\n\t\tvendor\n\t\tcollections(first: 1) {\n\t\t\tedges {\n\t\t\t\tnode {\n\t\t\t\t\ttitle\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}"),S=(e.productVariantFragment=t,"query($id: ID!) {\n\tnode(id: $id) {\n\t\t...variant\n\t}\n}\n".concat(t)),E=(e.fetchVariantQuery=S,"query($id: ID!) {\n\tnode: cart(id: $id) {\n\t\t... on Cart {\n\t\t\tid\n\t\t\twebUrl: checkoutUrl\n\t\t\testimatedCost {\n\t\t\t\tsubtotalAmount { amount }\n\t\t\t\ttotalAmount { amount }\n\t\t\t}\n\t\t\tlineItems: lines (first: 250) {\n\t\t\t\tedges {\n\t\t\t\t\tnode {\n\t\t\t\t\t\t... on CartLine {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\tquantity\n\t\t\t\t\t\t\tvariant: merchandise { ...variant }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n".concat(t)),T=(e.fetchCartQuery=E,"query($id: ID!) {\n\tnode(id: $id) {\n\t\t... on Checkout {\n\t\t\tid\n\t\t\twebUrl\n\t\t\tsubtotalPrice\n\t\t\ttotalPrice\n\t\t\tlineItems (first: 250) {\n\t\t\t\tedges {\n\t\t\t\t\tnode {\n\t\t\t\t\t\t... on CheckoutLineItem {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\tquantity\n\t\t\t\t\t\t\tvariant { ...variant }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n".concat(t)),I=(e.fetchCheckoutQuery=T,function(t){(0,u.default)(i,t);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();var r,n,o=function(){var t=(0,c.default)(r),e=n?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments);return(0,a.default)(this,e)};function i(t,e){var r;return(0,l.default)(this,i),(r=o.call(this,t.map(function(t){return t.debugMessage||t.message}).join(", "))).errors=t.map(function(t){return JSON.stringify(t)}),r.payload=e,r}return(0,p.default)(i,null,[{key:"initClass",value:function(){this.prototype.name="StorefrontError"}}]),i}((0,n.default)(Error))),L=(I.initClass(),function(t){return String(t).match(/^\d+$/)?t:M((t=t.match(/^gid:\/\//)?t:atob(t)).match(/\/([^\/]+)$/),function(t){return t[1]})}),q=function(t){for(var e=1;null!==(t=t.previousElementSibling);)e++;return e},N=function(t,e){var r=new IntersectionObserver(function(t){if((0,i.default)(t,1)[0].isIntersecting)return r.disconnect(),e()});return r.observe(t)};function F(t){(0,l.default)(this,F);var e=void 0!==(e=(t=null==t?{}:t).disableEcommerceProperty)&&e,t=void 0===(t=t.enableCheckoutEcommerceProperty)||t;this.debug=!1,this.storeUrl=window.ct_gtm_settings.shop_url,this.SHOPIFY_URL=window.ct_gtm_settings.shop_url,this.storefrontToken=window.ct_gtm_settings.storefront_token,this.SHOPIFY_STOREFRONT_TOKEN=window.ct_gtm_settings.storefront_token,this.currencyCode=window.ct_gtm_settings.currency,this.disableEcommerceProperty=e,this.enableCheckoutEcommerceProperty=t,this.occurances=[]}function M(t,e){return null!=t?e(t):void 0}window.gtmEcomm=new r({currencyCode:window.ct_gtm_settings.currency})},{"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":16,"@babel/runtime/helpers/slicedToArray":18,"@babel/runtime/helpers/typeof":19,"@babel/runtime/helpers/wrapNativeSuper":21,"@babel/runtime/regenerator":23}]},{},[24]),document.addEventListener("DOMContentLoaded",ct_init_gtm_shopify);